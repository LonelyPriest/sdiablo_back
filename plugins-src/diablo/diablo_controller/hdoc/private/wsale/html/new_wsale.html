<div class="row">
  <div class="col-md-12">
    <div class="portlet box purple">
      
      <div class="portlet-title">
	<div class="caption"><i class="glyphicon glyphicon-record"></i>
	  <span>销售开单</span>
	</div>
	<div class="actions">
	  <div class="btn-group">
	    <button type="button" class="btn red"
		    x-ng-click="back()">返回
	      <i class="glyphicon glyphicon-circle-arrow-left"></i>
	    </button>
	    
	    <!-- <button class="btn btn-warning red-stripe" -->
	    <!-- 	    x-ng-disabled="disable_draft()" -->
	    <!-- 	    x-ng-click="wsale_draft()">存为草稿 -->
	    <!--   <i class="glyphicon glyphicon-plus"></i></button> -->
	    <button class="btn btn-info purple-stripe"
		    x-ng-disabled="disable_draft()"
		    x-ng-click="list_draft()">获取草稿
	      <i class="glyphicon glyphicon-send"></i></button>
	    
	    <button class="btn btn-success purple-stripe"
		    x-ng-disabled="disable_save()"
		    x-ng-click="save_wsale()">保存
	      <i class="glyphicon glyphicon-save"></i></button>
	    <button class="btn btn-danger purple-stripe"
		    x-ng-disabled="disable_refresh"
		    x-ng-click="refresh()">下一单
	      <i class="glyphicon glyphicon-plus"></i></button>
	  </div>
	</div>
	<div class="tools"></div>
      </div>

      <!--BEGIN table container-->
      <div class="portlet-body">
	<!--BEGIN table-toolbar-->
	<div class="table-toolbar">
	  
	  <div class="row diablo-form-group">
	    <div class="col-xs-3 col-md-3 ">
	      <div class="input-group">
	  	<input class="form-control" type="text"
	  	       x-ng-model="select.retailer"
	  	       placeholder="请选择客户" 
	  	       typeahead-editable="false"
		       typeahead-on-select="change_retailer()"
	  	       typeahead="r as r.name for r in
	  			  retailers|filter:$viewValue|limitTo:8"/>
	  	<span class="input-group-btn">
	  	  <button class="btn green"
	  		  x-ng-click="add_retailer()">
		    <i class="glyphicon glyphicon-plus"></i></button> 
	  	</span>
		<span class="input-group-btn">
		  <button class="btn default fg-red red-stripe"
			  x-ng-disabled="!select.retailer"
	  		  x-ng-click="select.retailer=undefined">
		    <i class="glyphicon glyphicon-pushpin"></i></button>
		</span>
	      </div>
	    </div>

	    <div class="col-xs-3 col-md-3">
	      <div class="input-group">
		<span class="input-group-addon">
	  	  <!-- <i class="glyphicon glyphicon-registration-mark fg-red"></i> -->
		  店铺
		</span>
	  	<input class="form-control" type="text"
	  	       x-ng-model="select.shop"
	  	       placeholder="请选择店铺" 
	  	       typeahead-editable="false"
		       typeahead-on-select="change_shop()"
	  	       typeahead="s as s.name for s in
	  			  shops|filter:$viewValue|limitTo:8"></input> 
	      </div>
	    </div>

	    <div class="col-xs-3 col-md-3
			
			">
	      <div class="input-group">
		<!-- <span class="input-group-addon"> -->
	  	<!--   <i class="glyphicon glyphicon-user"></i>日期 -->
	  	<!-- </span> -->
		<input type="text" class="form-control"
		       placeholder="年/月/日"
		       datepicker-popup="yyyy/MM/dd"
		       is-open="isOpened"
		       close-text="关闭"
		       clear-text="清除"
		       current-text="今天"
		       show-weeks="false"
		       x-ng-model="select.date"
		       x-ng-init="select.date=today()"></input>
	  	<span class="input-group-btn">
		  <button type="button"
			  class="btn btn-default"
			  x-ng-click="open_calendar($event)">
		    <i class="glyphicon glyphicon-calendar"></i></button>
		</span>
	      </div>
	    </div>

	    <div class="col-xs-3 col-md-3 ">
	      <div class="input-group">
		<span class="input-group-addon">
	  	  <i class="icon-user fg-red"></i>
	  	</span>
	  	<select class="form-control" type="text"
	  		x-ng-model="select.employee"
	  		x-ng-options="e as e.name for e in
	  			      employees|filter:$viewValue|limitTo:8">
		</select> 
	      </div>
	    </div> 
	  </div> <!--END row-->


	  <!--BEGIN row-->
	  <div class="row diablo-form-group">
	    <div class="col-xs-3 col-md-3 ">
	      <div class="input-group">
	    	<span class="input-group-addon">
	    	  <i class="glyphicon glyphicon-comment fg-red"></i>备注</span>
	    	<input class="form-control"
		       type="text"
		       placeholder="备注"
	    	       x-ng-model="select.comment"></input>
	      </div>
	    </div>
	    
	    <div class="col-xs-9 col-md-9 "> 
	      <div class="input-group">
		<span class="input-group-addon">
		  <i class="glyphicon glyphicon-yen fg-red"></i>现金</span>
		<form name="select.form.cashForm">
		  <div ng-class="{'has-error':select.form.cashForm.$invalid
				 && !select.form.cashForm.$pristine}">
	  	    <input class="form-control"
			   type="number" step="0.01"
			   x-ng-pattern=pattern.money
	  		   x-ng-model="select.cash"
			   placeholder="现金"
			   popover-placement="top"
			   popover-trigger="focus"
			   popover="支持二位小数"></input>
		  </div>
		</form>

		<span class="input-group-addon">
		  <i class="glyphicon glyphicon-credit-card fg-red"></i>刷卡</span>
		<form name="select.form.cardForm">
		  <div ng-class="{'has-error':select.form.cardForm.$invalid
				 && !select.form.cardForm.$pristine}">
	  	    <input class="form-control"
			   type="number" step="0.01"
			   x-ng-pattern=pattern.money
	  		   x-ng-model="select.card"
			   placeholder="刷卡"
			   popover-placement="top"
			   popover-trigger="focus"
			   popover="支持二位小数"></input>
		  </div>
		</form>

		<span class="input-group-addon">
		  <i class="glyphicon glyphicon-piggy-bank fg-red"></i>汇款</span>
		
		<form name="select.form.wireForm">
		  <div ng-class="{'has-error':select.form.wireForm.$invalid
				 && !select.form.wireForm.$pristine}">
	  	    <input class="form-control"
			   type="number" step="0.01"
			   placeholder="汇款"
			   x-ng-pattern=pattern.money
	  		   x-ng-model="select.wire"></input>
		  </div> 
		</form>

		<span class="input-group-addon">
		  <i class="glyphicon glyphicon-yen fg-red"></i>欠款</span>
	  	<input class="form-control" readonly
	  	       x-ng-model="select.surplus"></input> 
		
		<!-- <span class="input-group-addon"><span class="fg-red">未付</span></span> -->
	      </div>
	    </div> 
	  </div> <!--END row-->


	  <!--BEGIN row-->
	  <div class="row diablo-form-group">
	    <div class="col-sm-3 col-md-3 ">
	      <div class="input-group">
	    	<span class="input-group-addon">
	    	  <i class="glyphicon glyphicon-map-marker fg-red"></i>总数</span>
	    	<input class="form-control" type="text" readonly
	    	       x-ng-model="select.abs_total"></input>
	      </div>
	    </div>
	    
	    <div class="col-sm-9 col-md-9 "> 
	      <div class="input-group">
		<span class="input-group-addon">
		  <i class="glyphicon glyphicon-ban-circle fg-red"></i>核销</span>
		<form name="select.form.vForm">
		  <div ng-class="{'has-error':select.form.vForm.$invalid
				 && !select.form.vForm.$pristine}">
	  	    <input class="form-control"
			   type="number" step="0.01"
			   x-ng-pattern=pattern.money
	  		   x-ng-model="select.verificate"
			   placeholder="核销"
			   popover-placement="top"
			   popover-trigger="focus"
			   popover="支持二位小数"></input>
		  </div>
		</form>
		
		<span class="input-group-addon">
		  <i class="glyphicon glyphicon-yen fg-red"></i>应付</span>
		<input class="form-control" type="text" readonly
		       x-ng-model="select.should_pay"></input>

		<span class="input-group-addon">
		  <i class="glyphicon glyphicon-yen fg-red"></i>实付</span>
	  	<input class="form-control" readonly
	  	       x-ng-model="select.has_pay"></input>

		<span class="input-group-addon">
		  <i class="glyphicon glyphicon-yen fg-red"></i>结余</span>
	  	<input class="form-control" type="text" readonly
	  	       x-ng-model="select.left_balance"></input> 
		
	      </div>
	    </div> 
	  </div> <!--END row-->



	  <!--BEGIN row-->
	  <div class="row diablo-form-group"> 
	    <div class="col-xs-6 col-md-6">
	      <div class="input-group">
	    	<span class="input-group-addon">
		  <i class="glyphicon glyphicon-plane fg-red"></i>费用性质</span>
		<select class="form-control" type="text"
	  		x-ng-model="select.extra_pay_type"
	  		x-ng-options="ex as ex.name for ex in
	  			      extra_pay_types|filter:$viewValue|limitTo:8">
		</select> 
		<!-- <input class="form-control" type="text" -->
	    	<!--        x-ng-model="select.extra_pay_type"></input>  -->
	      </div>
	    </div>
	    
	    <div class="col-sm-6 col-md-6"> 
		<div class="input-group">
		  <span class="input-group-addon">
		    <i class="glyphicon glyphicon-yen fg-red"></i>关联费用</span> 
		<form name="select.form.extraForm">
		  <div ng-class="{'has-error':select.form.extraForm.$invalid
				 && !select.form.extraForm.$pristine}">
	  	    <input class="form-control"
			   type="number" step="0.01"
			   placeholder="关联费用"
			   x-ng-pattern="/^\d+(.\d{1,2})?$/"
	  		   x-ng-model="select.extra_pay"
			   popover-placement="top"
			   popover-trigger="focus"
			   popover="支持二位小数"></input>
		  </div>
		</form> 
	      </div>
	    </div> 
	  </div> <!--END row-->
	  
	</div> <!--END table-toolbar-->
	
	<!--BEGN portlet body--> 
	<div class="portlet-body">
	  <!--BEGIN panel-->
	  <tabset>
	    <tab heading="{{wsale_mode[0].title}}" active="wsale_mode[0].active">
	      <div class="panel panel-default">
		
		<div class="table-responsive">
		  <!--EBGIN table supplier-->
		  <table id="t_wnew" class="table table-bordered
				table-striped table-hover table-condensed table-advanced">
		    <thead class="stick-thead"
			   fsm-sticky-header
			   scroll-body="'#t_wnew'"
			   scroll-stop="50">
		      <tr>
			<th class="text-center">序号</th>
			<th class="text-center">货号</th>
			<th class="text-center">品名</th>
			<th x-ng-if="setting.check_sale"
			    class="text-center">库存</th>
			<!-- <th class="text-center">类别</th> -->
			<!-- <th class="text-center">性别</th> -->
			<!-- <th class="text-center">厂商</th> -->
			<!-- <th class="text-center">季节</th> --> 
			<!-- <th class="text-center warning">上次价格</th> -->
			<!-- <th class="text-center warning">上次折扣</th> -->
			
			<th class="text-center">单价类型</th>
			<th class="text-center">单价</th>
			<!-- <th class="text-center">折扣</th> -->
			
			<th x-ng-if="setting.show_discount"
			    class="text-center">折扣</th> 
			<th class="text-center">折后价</th>
			<!-- <th class="text-center">库存</th> -->
			<th class="text-center">数量</th>
			<th class="text-center">合计</th>
			<th class="col-md-1 col-sm-1 col-xs-1">备注</th>
			<th class="text-center">操作</th>
		      </tr>
		    </thead>
		    <tbody>
		      <tr class="text-center" ng-repeat="inv in inventories">
			
			<td>{{inv.order_id}}</td>
			<td x-ng-if="!setting.q_backend" class="col-md-2 text-left vert-align">
			  <span ng-if="!inv.$new">{{inv.style_number}}</span>
			  <form name="inv.form.good" ng-if="inv.$new">
			    <div ng-class="{'has-error':inv.form.good.$invalid
					   && !inv.form.good.$pristine}">
			      <input class="form-control text-left" type="text"
				     required
				     x-ng-model="inv.style_number"
				     placeholder="货号"
				     typeahead-editable="false"
				     typeahead-on-select="on_select_good($item, $model, $label)"
				     typeahead="g as g.name for g in
						all_w_inventory|filter:{name:$viewValue}|limitTo:20"/>
			    </div>
			  </form>
			</td>
			
			<td x-ng-if="setting.q_backend" class="col-md-2 text-left vert-align">
			  <span ng-if="!inv.$new">{{inv.style_number}}</span>
			  <form name="inv.form.good" ng-if="inv.$new">
			    <div ng-class="{'has-error':inv.form.good.$invalid
					   && !inv.form.good.$pristine}">
			      <input class="form-control text-left" type="text"
				     required
				     x-ng-model="inv.style_number"
				     placeholder="货号"
				     typeahead-editable="false"
				     typeahead-on-select="on_select_good($item, $model, $label)"
				     typeahead-wait-ms="500"
				     typeahead-loading="loading"
				     typeahead="g as g.name for g in
						match_style_number($viewValue)|limitTo:8"></input>
			      <span x-ng-show="loading">
				<i class="glyphicon glyphicon-refresh"></i>
			      </span>
			    </div>
			  </form>
			</td>
			<!-- <td>{{inv.style_number}}</td> -->
			<td class="vert-align">{{inv.brand}}</td>
			<td x-ng-if="setting.check_sale"
			    class="vert-align">{{inv.total}}
			</td>
			
			<!-- <td class="vert-align">{{inv.last_discount}}</td> -->
			<!-- <td class="vert-align">{{inv.type}}</td> -->
			<!-- <td class="vert-align">{{sexs[inv.sex]}}</td> -->
			<!-- <td>{{inv.firm}}</td> -->
			<!-- <td class="vert-align">{{seasons[inv.season]}}</td> -->
			
			<!-- <td class="vert-align">{{inv.last_fprice}}</td> -->
			<!-- <td class="vert-align">{{inv.last_discount}}</td>  -->

			<!-- price style-->
			<td class="vert-align">
			  <div ng-if="!inv.$new && !inv.free_update">
			    {{inv.sell_style.name}}
			  </div> 
			  <div x-ng-if="inv.$new
					&& inv.free_color_size
					&& inv.sell_style
					|| !inv.$new && inv.free_update">
			    <select class="form-control table-select"
				    x-ng-model="inv.sell_style"
				    x-ng-change="inv.fprice=inv[inv.sell_style.f]"
				    x-ng-init="inv.sell_style=recover_sell_style(inv)"
				    x-ng-options="s as s.name for s
						  in sell_styles|filter:$viewValue|limitTo:8">
			      <!-- <option value="">-- 请选择 --<option> -->
			    </select>
			  </div>
			</td>

			<td class="col-md-1 vert-align">
			  <span x-ng-if="!inv.$new || inv.free_color_size">
			    <div>{{inv[inv.sell_style.f]}}</div>
			    <!-- {{inv.fprice}} -->
			    <!-- <div class="fg-red">上次：{{inv.last_fprice}}</div> -->
			  </span>
			</td>

			<!-- <td class="vert-align">{{inv.discount}}</td> -->
			<td x-ng-if="setting.show_discount"
			    class="col-md-1 vert-align">
			<!-- <td class="col-md-1 vert-align">   -->
			  <div ng-if="!inv.$new && !inv.free_update">{{inv.fdiscount}}</div> 
			  <form name="inv.form.fdiscount"
				ng-if="inv.$new && inv.free_color_size
				       || !inv.$new && inv.free_update">
			    <div ng-class="{'has-error':inv.form.fdiscount.$invalid
					   && !inv.form.fdiscount.$pristine}"> 
			      <input class="form-control"
				     type="number" step="1"
				     required
				     x-ng-model="inv.fdiscount"
				     x-ng-pattern="/^\d{2}$|100$/"
				     popover-placement="top"
				     popover-trigger="focus"
				     popover="默认上次折扣"></input>
			    </div>
			  </form>
			</td> 

			<td class="col-md-1 vert-align">
			  <div ng-if="!inv.$new && !inv.free_update">
			    <div x-ng-if="inv.sell
					&& inv.fdiscount
					&& (inv.fprice === 0 || inv.fprice)">
			      <span>{{f_mul(inv.fprice, (inv.fdiscount * 0.01))}}
			      </span>
			    </div>
			  </div> 
			  <form name="inv.form.fprice"
				ng-if="inv.$new && inv.free_color_size
				       || !inv.$new && inv.free_update">
			    <div ng-class="{'has-error':inv.form.fprice.$invalid
					   && !inv.form.fprice.$pristine}"> 
			      <input class="form-control"
				     type="number" step="0.01"
				     required
				     x-ng-pattern="/^\d+(.\d{1,2})?$/"
				     x-ng-model="inv.fprice"
				     popover-placement="top"
				     popover-trigger="focus"
				     popover="默认上次成交价"></input>
			    </div>
			  </form>
			</td> 
			
			<!-- <td class="vert-align">{{inv.total}}</td> -->

			<!-- sell count-->
			<td class="col-md-1 vert-align">
			  <div ng-if="!inv.$new && !inv.free_update"> 
			    {{inv.sell}}
			  </div> 
			  <form name="inv.form.sell"
				x-ng-if="inv.$new && inv.free_color_size
				|| !inv.$new && inv.free_update">
			    <div ng-class="{'has-error':inv.form.sell.$invalid
					   && !inv.form.sell.$pristine}"> 
			      <input type="number" step="0.01"
				     class="form-control"
				     placeholder="数量"
				     required
				     x-ng-pattern="pattern.sell"
				     x-ng-model="inv.sell"
				     x-ng-change="auto_save_free(inv)"
				     popover-placement="top"
				     popover-trigger="focus"
				     popover="均色均码直接输入数量"/>
			    </div> 
			  </form>

			  <!-- <form name="inv.form.sell" -->
			  <!-- 	x-ng-if="!inv.$new && inv.free_update"> -->
			  <!--   <div ng-class="{'has-error':inv.form.sell.$invalid -->
			  <!-- 		   && !inv.form.sell.$pristine}">  -->
			  <!--     <input type="number" step="0.01" -->
			  <!-- 	     class="form-control" -->
			  <!-- 	     placeholder="数量" -->
			  <!-- 	     required -->
			  <!-- 	     x-ng-pattern="pattern.sell" -->
			  <!-- 	     x-ng-model="inv.sell" -->
			  <!-- 	     popover-placement="top" -->
			  <!-- 	     popover-trigger="focus" -->
			  <!-- 	     popover="均色均码直接输入数量"/> -->
			  <!--   </div>  -->
			  <!-- </form> -->
			  
			</td>

			<td class="vert-align">
			  <div x-ng-if="inv.sell
					&& inv.fdiscount
					&& (inv.fprice === 0 || inv.fprice) ">
			    <span x-ng-if="setting.round===1">
			      {{round(inv.fprice * inv.sell * inv.fdiscount * 0.01)}}
			    </span>

			    <span x-ng-if="setting.round===0">
			      {{f_mul(inv.fprice * inv.fdiscount * inv.sell, 0.01)}}
			    </span>
			    
			    <!-- <span> -->
			    <!--   {{float_mul( -->
			    <!--   float_mul(inv.sell, -->
			    <!--   float_mul(inv.fprice, inv.fdiscount)),  0.01)}} -->
			    <!-- </span> -->
			  </div>
			</td>

			<td class="vert-align">
			  <form>
			    <div> 
			      <input class="form-control input-xs"
				     type="text"
				     placeholder="备注"
				     x-ng-model="inv.comment"/>
			    </div>
			  </form>
			</td>
			
			<td class="text-left vert-align">
			  <span x-ng-if="inv.$new">
			    <!-- <a class="btn btn-success btn-xs" -->
			    <!--    x-ng-if="inv.free_color_size" -->
			    <!--    x-ng-disabled="inv.form.good.$invalid -->
			    <!-- 		      || inv.form.sell.$invalid -->
			    <!-- 		      || inv.form.fprice.$invalid -->
			    <!-- 		      || inv.form.fdiscount.$invalid -->
			    <!-- 		      || has_saved" -->
			    <!--    x-ng-click="add_free_inventory(inv)">保存 -->
			    <!--   <i class="glyphicon glyphicon-plus"></i></a> -->
			    
			    <a class="btn diablo-input-button btn-success"
			       x-ng-if="!inv.free_color_size"
			       x-ng-disabled="inv.form.good.$invalid"
			       x-ng-click="add_inventory(inv)">新增
			      <i class="glyphicon glyphicon-plus"></i></a>
			    
			    <a class="btn diablo-input-button btn-warning"
			       x-ng-disabled="!inv.style_number"
			       x-ng-click="reset_inventory(inv)">重置
			      <i class="glyphicon glyphicon-pushpin"></i></a>
			  </span>

			  <span ng-if="inv.$edit">
			    <a class="btn diablo-input-button btn-primary"
			       x-ng-if="!inv.free_update"
			       x-ng-disabled="inv.free_color_size"
			       x-ng-click="inventory_detail(inv)">详情
			      <i class="glyphicon glyphicon-eye-open"></i></a>
			    
			    <a class="btn diablo-input-button yellow"
			       x-ng-if="!inv.free_update"
			       x-ng-click="update_inventory(inv)">修改
			      <i class="glyphicon glyphicon-edit"></i></a>
			    
			    <a class="btn diablo-input-button btn-danger"
			       x-ng-if="!inv.free_update"
			       x-ng-click="delete_inventory(inv)">删除
			      <i class="glyphicon glyphicon-erase"></i></a>

			    <a class="btn diablo-input-button btn-success"
			       x-ng-show="inv.free_update"
			       x-ng-disabled="inv.form.sell.$invalid
			    		      || inv.form.fprice.$invalid
			    		      || inv.form.fdiscount.$invalid"
			       x-ng-click="save_free_update(inv)">保存
			      <i class="glyphicon glyphicon-plus"></i></a>
			    
			    <a class="btn diablo-input-button btn-danger"
			       ng-if="inv.free_update"
			       x-ng-disabled=" inv.form.sell.$invalid"
			       x-ng-click="cancel_free_update(inv)">取消
			      <i class="glyphicon glyphicon-erase"></i></a> 
			  </span>
			  
			</td>
		      </tr>

		      <tr x-ng-if="inventories.length>1" class="text-center">
			<td x-ng-if="setting.show_discount" colspan=8></td>
			<td x-ng-if="!setting.show_discount" colspan=7></td>
			<td class="vert-align">{{select.abs_total}}</td>
			<td class="vert-align">{{select.should_pay}}</td>
			<td colspan=2></td>
		      </tr>
		      
		    </tbody> 
		  </table> <!--END supplier table-->
		</div> <!--END table responsive--> 
	      </div> <!--END panel-->
	    </tab>

	    <tab heading="{{wsale_mode[1].title}}"
		 active="wsale_mode[1].active"
		 select="image_mode(current_page)">

	      <div class="table-toolbar">
		<!--BEGIN row-->
		<div class="row">
		  <div class="col-xs-6 col-sm-6 col-md-4">
		    <time-search
                       glyphicon="glyphicon glyphicon-arrow-left fg-red"
                       time="time.start_time" ok="do_search(default_page)"></time-search>
		  </div>

		  <div class="col-xs-6 col-sm-6 col-md-4">
		    <time-search
                       glyphicon="glyphicon glyphicon-arrow-right fg-red"
                       time="time.end_time" ok="do_search(default_page)"></time-search>
		  </div>

		  <div class="col-sm-12 col-md-4">
		    <query-pattern ng-model="match"
				   filters="filters"
				   filter="filter"></query-pattern>
		  </div>
		</div> <!--END row-->

		<query-group filters="filters"
			     prompt="prompt"
			     ok="do_search(default_page)"></query-group>

	      </div> <!--END table-toolbar-->
	      
	      <div class="table-responsive">
		<table class="table table-bordered
			      table-striped table-hover table-condensed table-advanced">
		  <tbody>
		    <tr x-ng-repeat="r in row_range">
		      <td x-ng-repeat="img in image_inventories[r]">
			<span x-ng-if="img.path">
	      		  <a href="javascript:;"
			     x-ng-click="wsale_mode[0].active=true; select_image(img)"
	      		   class="img-responsive thumbnail">
	      		    <img ng-src="{{img.path}}"></img>
	      		    <div class="caption">
	      		      <p>{{img.style_number}}-{{img.brand}}-{{img.type}}
	      			<span class="fg-red">{{img.total}}</span>
				<span x-ng-show="img.history" class="fg-yellow">已购买</span>
	      		      </p>
	      		    </div>
	      		  </a>
	      		</span>
	      		<span x-ng-if="!img.path">
	      		  <a href="javascript:;"
			     x-ng-click="wsale_mode[0].active=true; select_image(img)"
	      		     class="img-responsive thumbnail">
	      		    <default-img></default-img>
	      		    <div class="caption">
	      		      <p>{{img.style_number}}-{{img.brand}}-{{img.type}}
	      			<span class="fg-red">{{img.total}}</span>
				<span x-ng-show="img.history" class="fg-yellow">已购买</span>
	      		      </p>
	      		    </div>
	      		  </a>
	      		</span>
		      </td>
		    </tr>
		  </tbody>

		  <tfoot>
		    <tr> 
		      <td x-ng-show="total_items>items_perpage" colspan={{colspan}}>
			<span class="pagination">
			  <span>显示第 {{current_page}} / {{num_pages}} 项结果，
			    共 {{total_items}} 项</span>
			</span>
			<pagination
			   class="pagination-lg pull-right"
			   total-items="total_items"
			   items-per-page="items_perpage"
			   num-pages="num_pages"
			   max-size="max_page_size"
			   boundary-links="true"
			   previous-text="&lsaquo;" next-text="&rsaquo;"
			   first-text="&laquo;" last-text="&raquo;"
			   x-ng-model="current_page"
			   x-ng-init="current_page=default_page"
			   x-ng-model="current_page"
			   x-ng-change="page_changed(current_page)">
			</pagination>
		      </td>
		    </tr>
		  </tfoot> 
		</table>
	      </div> 
	    </tab>

	    <tab x-ng-controller="wsaleGoodNewCtrl" active="wsale_mode[2].active">
	      <tab-heading>
		{{wsale_mode[2].title}}<i class="icon icon-plus fg-red"></i>
	      </tab-heading>

	      <div class="table-toolbar"> 

	      </div> <!--END table-toolbar-->
	      
	      <div class="row">
		<div class="col-md-12">
		  <div class="portlet box blue">
		    <!--BEGIN portlet-body-->
		    <div class="portlet-body form">
		      <!--BEGIN from -->
		      <form class="form-horizontal" name="goodForm" novalidate>
			<!--BEGIN form body-->
			<div class="form-body">
			  <div class="form-group">
			    <label class="col-sm-3 col-md-3 control-label">款号</label>
			    <div class="col-sm-6 col-md-6"> 
			      <div class="input-group">
				<div x-ng-class="{'has-error':goodForm.style_number.$invalid
						 && !goodForm.style_number.$pristine
						 || is_same_good}">
				  <input type="text"
					 class="form-control"
					 name="style_number"
					 required
					 capitalize
					 placeholder="请输入2-10位款号" 
					 x-ng-model="good.style_number"
					 x-ng-pattern="pattern.style_number" 
					 x-ng-enter=""></input>
				</div>
				<span class="input-group-addon bg-white fg-red">*</span>
			      </div>
			    </div>
			    <div ng-show="goodForm.style_number.$invalid 
					  && !goodForm.style_number.$pristine">
			      <span class="fg-red">款号只能是字母，数字或横杠，2-10个字符</span>
			    </div>
			    <div ng-show="is_same_good">
			      <span class="fg-red">该款号，品牌所对应的货品已存在，请重新输入</span>
			    </div>
			  </div>

			  <!--brand-->
			  <div class="form-group">
			    <label class="col-sm-3 col-md-3 control-label">品牌</label>
			    <div class="col-sm-6 col-md-6"> 
			      <div class="input-group">
				<div x-ng-class="{'has-error':goodForm.brand.$invalid
						 && !goodForm.brand.$pristine
						 || is_same_good}">
				  <input type="text"
					 class="form-control"
					 name="brand"
					 required
					 placeholder="请输入品牌" 
					 x-ng-model="good.brand"
					 x-ng-pattern="pattern.brand"
					 x-ng-enter=""
					 typeahead="b.name for b in
						    brands|filter:$viewValue|limitTo:8"></input>
				</div>
				<!-- <span class="input-group-btn"> -->
				<!--   <button class="btn btn-default fg-red" x-ng-click="refresh_brand()"> -->
				<!--     <i class="glyphicon glyphicon-refresh"></i></button> -->
				<!-- </span> -->
				<span class="input-group-addon bg-white fg-red">*</span>
			      </div>
			    </div>	      
			    <div ng-show="goodForm.brand.$invalid && !goodForm.brand.$pristine">
			      <span style="color:red">品牌只能是中文，字母或数字</span>
			    </div>
			    <div ng-show="is_same_good">
			      <span class="fg-red">该款号，品牌所对应的货品已存在，请重新输入</span>
			    </div>
			  </div>
			  
			  <!--type-->
			  <div class="form-group">
			    <label class="col-sm-3 col-md-3 control-label">类别</label>
			    <div class="col-sm-6 col-md-6"> 
			      <div class="input-group">
				<div x-ng-class="{'has-error':goodForm.type.$invalid
						 && !goodForm.type.$pristine}">
				  <input type="text"
					 class="form-control"
					 name="type"
					 required
					 placeholder="豹纹马甲等"
					 x-ng-model="good.type"
					 x-ng-pattern="pattern.type"
					 x-ng-enter="" 
					 typeahead="t.name for t in
						    types|filter:$viewValue|limitTo:8"></input>
				</div>
				<!-- <span class="input-group-btn"> -->
				<!--   <button class="btn btn-default fg-red" x-ng-click="refresh_type()"> -->
				<!--     <i class="glyphicon glyphicon-refresh"></i></button> -->
				<!-- </span> -->
				<span class="input-group-addon bg-white fg-red">*</span>
			      </div>
			    </div>
			    <div ng-show="goodForm.type.$invalid && !goodForm.type.$pristine">
			      <span style="color:red">请输入中文，字母或数字，必须以中文开头</span>
			    </div>
			  </div>
			  
			  <div class="form-group">
			    <label class="col-sm-3 col-md-3 control-label">厂商</label>
			    <div class="col-sm-6 col-md-6"> 
			      <div class="input-group">
				<input type="text"
				       class="form-control"
				       name="firm"
				       required
				       placeholder="请输入厂商"
				       x-ng-model="good.firm"
				       x-ng-enter=""
				       typeahead-editable="false"
				       typeahead="f as f.name for f in
						  firms|filter:$viewValue|limitTo:8"></input>
				<span class="input-group-btn">
				  <button class="btn btn-success" x-ng-click="new_firm()">
				    <i class="glyphicon glyphicon-plus"></i></button>
				</span>
				<span class="input-group-addon bg-white fg-red">*</span> 
			      </div>
			    </div>	      
			    <div ng-show="goodForm.firm.$invalid && !goodForm.firm.$pristine">
			      <span style="color:red">厂商只能从提示框中选择</span>
			    </div>
			  </div>

			  <div class="form-group">
			    <label class="col-sm-3 col-md-3 control-label">性别</label>
			    <div class="col-sm-6 col-md-6"> 
			      <select class="form-control"
				      x-ng-model="good.sex"
				      x-ng-options="s as s.name for s in sexs"
				      x-ng-init="good.sex=sexs[0]"></select>
			    </div>
			  </div>

			  <div class="form-group">
			    <label class="col-sm-3 col-md-3 control-label">年度</label>
			    <div class="col-sm-6 col-md-6">
			      <div class="input-group">
				<select class="form-control"
					x-ng-model="good.year"
					x-ng-options="y for y in full_years"></select>
				<span class="input-group-addon bg-white fg-red">*</span>
			      </div>
			    </div> 
			  </div>
			  
			  <!--season-->
			  <div class="form-group">
			    <label class="col-sm-3 col-md-3 control-label">季节</label>
			    <div class="col-sm-6 col-md-6"> 
			      <select class="form-control"
				      x-ng-model="good.season"
				      x-ng-options="s as s.name for s in seasons">
			      </select>
			    </div>
			  </div> 

			  <div class="form-group">
			    <label class="col-sm-3 col-md-3 control-label">吊牌价</label>
			    <div class="col-sm-6 col-md-6"> 
			      <div class="input-group">
				<input class="form-control"
				       type="number" step="0.01" 
				       name="tag_price"
				       required
				       placeholder="吊牌价，支持二位小数"
				       x-ng-pattern="/^\d+(.\d{1,2})?$/"
				       x-ng-enter=""
				       x-ng-model="good.tag_price"></input>
				<span class="input-group-addon bg-white fg-red">*</span> 
			      </div>
			    </div>
			    <div ng-show="goodForm.tag_price.$invalid && !goodForm.tag_price.$pristine">
			      <span style="color:red">格式（dd.dd）只支持二位小数</span>
			    </div>
			  </div>

			  <div class="form-group">
			    <label class="col-sm-3 col-md-3 control-label">批发价</label>
			    <div class="col-sm-6 col-md-6"> 
			      <div class="input-group">
				<input class="form-control"
				       type="number" step="0.01" 
				       name="pkg_price"
				       required
				       placeholder="打包价，支持二位小数"
				       x-ng-enter=""
				       x-ng-pattern="/^\d+(.\d{1,2})?$/"
				       x-ng-model="good.pkg_price"></input>
				<span class="input-group-addon bg-white fg-red">*</span>
			      </div>
			    </div>
			    <div ng-show="goodForm.pkg_price.$invalid && !goodForm.pkg_price.$pristine">
			      <span style="color:red">格式（dd.dd）只支持二位小数</span>
			    </div>
			  </div> 
			  
			  <div class="form-group">
			    <label class="col-sm-3 col-md-3 control-label">折扣</label>
			    <div class="col-sm-6 col-md-6"> 
			      <div class="input-group">
				<div ng-class="{'has-error':goodForm.discount.$invalid
					       && !goodForm.discount.$pristine}">
				  <input class="form-control"
					 type="number" step="1" 
					 name="discount"
					 required
					 placeholder="两位整数，无折扣请输入100"
					 x-ng-pattern="/^\d{2}$|100$/"
					 x-ng-model="good.discount"></input>
				</div>
				<span class="input-group-addon bg-white fg-red">*</span>
			      </div>
			    </div>
			    <div ng-show="goodForm.discount.$invalid && !goodForm.discount.$pristine">
			      <span style="color:red">两位整数，无折扣请输入100</span>
			    </div>
			  </div> 

			  <div class="form-group">
			    <label class="col-sm-3 col-md-3 control-label">颜色</label>
			    <div class="col-sm-6 col-md-6"> 
			      <div class="input-group">
				<input type="text" readonly
				       class="form-control"
				       placeholder="均色均码无需选择"
				       x-ng-model="good.colors"></input>
				<span class="input-group-btn">
				  <button class="btn btn-primary" x-ng-click="select_color()">
				    <i class="glyphicon glyphicon-arrow-right"></i></button>
				  <!-- <button class="btn btn-success" x-ng-click="new_color()"> -->
				  <!--   <i class="glyphicon glyphicon-plus"></i></button> -->
				</span>
			      </div>
			    </div>
			  </div>
			  
			  <div class="form-group">
			    <label class="col-sm-3 col-md-3 control-label">尺码</label>
			    <div class="col-sm-6 col-md-6"> 
			      <div class="input-group">
				<input type="text" readonly
				       class="form-control"
				       placeholder="均色均码无需选择"
				       x-ng-model="good.sizes"></input>
				<span class="input-group-btn">
				  <button class="btn btn-primary" x-ng-click="select_size()">
				    <i class="glyphicon glyphicon-arrow-right"></i></button>
				  <!-- <button class="btn btn-success" x-ng-click="new_size()"> -->
				  <!--   <i class="glyphicon glyphicon-plus"></i></button> -->
				</span>
			      </div>
			    </div> 
			  </div> 
			  	    		  
			  <!--BEGIN form action-->
			  <div class="form-actions fluid">
			    <div class="col-sm-offset-3 col-sm-4 col-md-offset-3 col-md-6">
			      <div class="pull-right">
				<button type="submit" class="btn btn-primary"
					ng-disabled="goodForm.$invalid || is_same_good"
					x-ng-click="new_good()">确定</button>
				<button type="button" class="btn btn-warning"
					x-ng-click="reset()">重置</button>
			      </div>
			    </div>
			  </div> <!--END form action-->
			</div> <!--END form body--> 
		      </form> <!--END form-->
		    </div> <!--END portlet-body form-->
		  </div> <!--END portlet box-->
		</div> <!--END col-md-12-->
	      </div>
	      
	    </tab>
	    
	  </tabset>
	</div> <!--END portlet body-->
      </div> <!--END table container-->
      
    </div> <!--END portlet box-->
  </div> <!--END col-md-12-->
</div> <!--END row-->


<script type="text/ng-template" id="wsale-new.html">
  <div class="modal-body"> 
    <div class="row">
      <div class="col-md-5">
	<div class="input-group">
	  <span class="input-group-addon"><i class="glyphicon glyphicon-scale fg-red"></i></span>
	  <select class="form-control text-center"
		  x-ng-model="params.sell_style" 
		  x-ng-change="params.fprice=params.get_price(params.sell_style.f)"
		  x-ng-options="s as s.name for s
				in params.sell_styles|filter:$viewValue|limitTo:8">
	  </select>
	  <span class="input-group-addon bg-blue">
	    {{params.get_price(params.sell_style.f)}}
	  </span>
	</div>
      </div>

      <div class="col-md-7">
	<div class="input-group">
	  <span class="input-group-addon"><i class="glyphicon glyphicon-scissors fg-red"></i></span>
	  <form name="fdiscount">
	    <div ng-class="{'has-error':fdiscount.$invalid
			   && !discount.$pristine}">
	      <input class="form-control text-center"
		     type="number" step="1"
		     required
		     x-ng-model="params.fdiscount"
		     placeholder="两位整数"
		     x-ng-pattern="/^\d{2}$|100$/" />
	    </div>
	  </form>

	  <span class="input-group-addon"><i class="glyphicon glyphicon-yen fg-red"></i></span>
	  <form name="fprice">
	    <div ng-class="{'has-error':fprice.$invalid
			   && !fprice.$pristine}"> 
	      <input class="form-control text-center" 
		     type="number" step="0.01"
		     required
		     x-ng-pattern="/^\d+(.\d{1,2})?$/"
		     x-ng-model="params.fprice" />
	    </div> 
	  </form>
      
	</div>
      </div> 
    </div>

    </br>
    
    <div class="table-responsive">
      <table class="table table-bordered table-striped table-condensed table-advanced">
	<tbody>
	  <tr>
	    <td></td>
	    <td x-ng-repeat="s in params.sizes" x-ng-switch on="s">
	      <span x-ng-switch-when="0">均码</span>
	      <span x-ng-switch-default>{{s}}</span>
	    </td>
	    <td class="col-md-1">批量</td>
	  </tr>
	  <tr x-ng-repeat="c in params.colors">
	    <td x-ng-show="params.large_size" x-ng-switch on="c.cid">
	      <span x-ng-switch-when="0">均色</span>
	      <span x-ng-switch-default>{{c.cname}}</span>
	    </td>

	    <td class="col-md-1" x-ng-show="!params.large_size" x-ng-switch on="c.cid">
	      <span x-ng-switch-when="0">均色</span>
	      <span x-ng-switch-default>{{c.cname}}</span>
	    </td>
	    <!-- <td class="col-md-1" x-ng-switch on="c.cid"> -->
	    <!--   <span x-ng-switch-when="0">均色</span> -->
	    <!--   <span x-ng-switch-default>{{c.cname}}</span> -->
	    <!-- </td> -->
	    
	    <td x-ng-repeat="s in params.sizes">
	      <div x-ng-if="(amount=params.get_amount(c.cid, s, params.amounts))?true:false">
		
		<div class="input-group">
		  <span class="input-group-addon modal-input-group-addon">{{amount.count}}</span>
		  <form name="aform">
		    <div ng-class="{'has-error':aform.$invalid || !params.valid_sell(amount)}">
		      <input x-ng-if="amount"
			     class="form-control modal-input text-center"
			     type="number" step="1"
			     x-ng-model="amount.sell_count"></input>
		    </div>
		  </form>
		</div>
		
	      </div> 
	    </td>

	    <!--batch-->
	    <td>
	      <input class="form-control modal-input text-center"
		     type="number" step="1"
		     x-ng-model="batch"
		     x-ng-pattern="/^[+|\-]?\d{1,3}$/"
		     x-ng-change="params.set_batch(c.cid, batch, params.amounts)"
		     x-ng-init="batch=params.get_batch(c.cid, params.amounts)">
	    </td>
	  </tr>
	</tbody> 
      </table>
    </div> <!--END table-responsive-->
    <!-- <image x-ng-show="params.path" -->
    <!-- 	   class="img-responsive img-thumbnail" -->
    <!-- 	   ng-src="{{params.path}}"></image> -->
  </div>

  <div class="modal-footer">
    <button class="btn btn-primary"
	    x-ng-disabled="fprice.$invalid
			   || fdiscount.$invalid
			   || !params.valid(params.amounts)" x-ng-click="ok()">保存</button>
    <button class="btn btn-warning" x-ng-click="cancel()">取消</button>
  </div>
</script>


<script type="text/ng-template" id="wsale-detail.html">
  <div class="modal-body">
    <div class="table-responsive">
      <table class="table table-bordered table-striped table-condensed table-advanced">
	<tbody>
	  <tr>
	    <td></td>
	    <td x-ng-repeat="s in params.sizes" x-ng-switch on="s">
	      <span x-ng-switch-when="0">均码</span>
	      <span x-ng-switch-default>{{s}}</span>
	    </td>
	  </tr>
	  <tr x-ng-repeat="c in params.colors">
	    <td class="col-md-1" x-ng-switch on="c.cid">
	      <span x-ng-switch-when="0">均色</span>
	      <span x-ng-switch-default>{{c.cname}}</span>
	    </td>
	    <!-- <td class="col-md-1">{{c.cname}}</td> -->
	    <td x-ng-repeat="s in params.sizes">
	      {{params.get_amount(c.cid, s, params.amounts).sell_count}} 
	    </td>
	  </tr>
	</tbody>
      </table>
    </div> <!--END table-responsive-->
    <image x-ng-show="params.path"
    	   class="img-responsive img-thumbnail"
    	   ng-src="{{params.path}}"></image>
  </div>

  <div class="modal-footer">
    <button class="btn btn-primary" x-ng-click="ok()">保存</button>
    <button class="btn btn-warning" x-ng-click="cancel()">取消</button>
  </div>
</script>


<script type="text/ng-template" id="new-retailer.html">
  <div class="modal-header">
    <button class="close" x-ng-click="cancel()" type="button">
      <span aria-hidden="true">&times;</span>
      <span class="sr-only"></span>
    </button>
    
    <h4 class="modal-title"><span class="label label-sm label-primary">
	新增零售商</span></h4>
  </div>

  <div class="modal-body">
    <form class="form-horizontal" name="retailerNewForm" novalidate>
      <div class="form-body"> 
	<!--Name-->
	<div class="form-group">
	  <label class="col-sm-3 col-md-3 control-label">名称</label>
	  <div class="col-sm-6 col-md-6">
	    <div class="input-group">
	      <input type="text"
		     class="form-control"
		     name="name"
		     required
		     placeholder="请输入零售商名称"
		     x-ng-model="params.retailer.name"
		     x-ng-minlength="2"
		     x-ng-maxlength="8"></input>
	      <span class="input-group-addon bg-white fg-red">*</span>
	    </div>
	  </div>
	  <!-- <span class="fg-red">*</span> -->
	  <div ng-show="retailerNewForm.name.$error.minlength
			|| retailerNewForm.name.$error.maxlength">
	    <span class="fg-red">名称太短，请输入2-8个字符</span>
	  </div> 
	</div>

	<!--mobile-->
	<div class="form-group"
	     ng-class="{'has-error': retailerNewForm.mobile.$invalid
		       && !retailerNewForm.mobile.$pristine}">
	  <label class="col-sm-3 col-md-3 control-label">联系方式</label>
	  <div class="col-sm-6 col-md-6">
	    <!-- <div class="input-group"> -->
	      <input type="text"
		     name="mobile"
		     ng-pattern="/^\d{3,4}\d{7,8}$/"
		     placeholder="请输入电话或手机号码，默认为空"
		     class="form-control"
		     x-ng-model="params.retailer.mobile"></input>
	      <!-- <span class="input-group-addon bg-white fg-red">*</span>  -->
	    <!-- </div> -->
	  </div>
	  <div ng-show="retailerNewForm.mobile.$invalid
			&& !retailerNewForm.mobile.$pristine">
	    <span class="fg-red">请输入正确的电话或手机号码</span>
	  </div>
	</div>

	<div class="form-group">
	  <label class="col-sm-3 col-md-3 control-label">联系地址</label>
	  <div class="col-sm-6 col-md-6">
	    <div class="input-group">
	      <input type="text"
		     class="form-control"
		     name="params.address"
		     required
		     placeholder="请输入零售商联系地址"
		     x-ng-model="params.retailer.address"
		     x-ng-minlength="2"
		     x-ng-maxlength="20"></input>
	      <span class="input-group-addon bg-white fg-red">*</span> 
	    </div>
	  </div>
	  <div ng-show="retailerNewForm.address.$error.minlength
			|| retailerNewForm.address.$error.maxlength">
	    <span class="fg-red">名称太短，请输入2-20个字符</span>
	  </div> 
	</div> 
      </div>
    </form>
  </div>

  <div class="modal-footer">
    <button class="btn btn-primary"
	    x-ng-disabled="retailerNewForm.$invalid"
	    x-ng-click="ok()">确认</button>
    <button class="btn btn-warning" x-ng-click="cancel()">取消</button>
  </div>
  
</script>


<script type="text/ng-template" id="wsale-draft.html">
  <div class="modal-body">
    <div class="table-responsive">
      <table class="table table-bordered table-striped table-condensed table-advanced">
	<thead>
	  <tr>
	    <th></th>
	    <th>单号</th>
	    <th>客户</th>
	    <!-- <th>数量</th>  -->
	    <th>店员</th>
	    <th>店铺</th>
	    <!-- <th>时间</th> -->
	  </tr>
	</thead>
	<tbody>
	  <tr x-ng-repeat="d in params.drafts">
	    <td class="vert-align">
	      <div class="checkbox checkbox-danger checkbox-circle">
		<input id={{d.sn}} type="checkbox" x-ng-model="d.select"></input>
		<label for={{d.sn}}></label>
	      </div>
	    </td>
	    <td>{{d.sn}}</td>
	    <td>{{d.retailer.name}}</td>
	    <td>{{d.employee.name}}</td>
	    <td>{{d.shop.name}}</td>
	    <!-- <td>{{d.datetime}}</td>  -->
	  </tr>
	</tbody>
      </table>
    </div>
  </div>

  <div class="modal-footer">
    <button class="btn btn-primary"
	    x-ng-disabled="!params.valid(params.drafts)"
	    x-ng-click="ok()">确定</button>
    <button class="btn btn-warning" x-ng-click="cancel()">取消</button>
  </div>
</script>




<!-- shortcut for new good-->
<script type="text/ng-template" id="new-firm.html">
  <div class="modal-header">
    <button class="close" x-ng-click="cancel()" type="button">
      <span aria-hidden="true">&times;</span>
      <span class="sr-only"></span>
    </button>
    
    <h4 class="modal-title"><span class="label label-sm label-primary">新增厂商</span></h4>
  </div>

  <div class="modal-body">
    <form class="form-horizontal" name="firmForm" novalidate> 
      <div class="form-body">
	<!--Name-->
	<div class="form-group">
	  <label class="col-sm-3 col-md-3 control-label">名称</label>
	  <div class="col-sm-6 col-md-6">
	    <div class="input-group">
	      <input type="text"
		     class="form-control"
		     name="name"
		     required
		     placeholder="请输入厂商名称"
		     x-ng-model="params.firm.name"
		     x-ng-minlength="2"
		     x-ng-maxlength="8"></input>
	      <span class="input-group-addon bg-white fg-red">*</span>
	    </div>
	  </div>
	  <div ng-show="firmForm.name.$error.minlength
			|| firmForm.name.$error.maxlength">
	    <span style="color:red">厂商名称太短，请输入2-8个字符</span>
	  </div> 
	</div> 
	
	<!--mobile-->
	<div class="form-group"
	     ng-class="{'has-error': firmForm.mobile.$invalid
		       && !firmForm.mobile.$pristine}">
	  <label class="col-sm-3 col-md-3 control-label">联系方式</label>
	  <div class="col-sm-6 col-md-6">
	    <!-- <div class="input-group"> -->
	    <input type="text"
		   name="mobile"
		   ng-pattern="/^\d{3,4}\d{7,8}$/"
		   placeholder="请输入电话或手机号码，默认为空"
		   class="form-control"
		   x-ng-model="params.firm.mobile"></input>
	      <!-- <span class="input-group-addon bg-white fg-red">*</span> -->
	      <!-- </div> -->
	  </div>
	  <div ng-show="firmForm.mobile.$invalid && !firmForm.mobile.$pristine">
	    <span style="color:red">请输入正确的电话或手机号码</span>
	  </div>
	</div>

	<div class="form-group">
	  <label class="col-sm-3 col-md-3 control-label">联系地址</label>
	  <div class="col-sm-6 col-md-6">
	    <div class="input-group">
	      <input type="text"
		     class="form-control"
		     name="address"
		     required
		     placeholder="请输入您的联系地址"
		     x-ng-model="params.firm.address"
		     x-ng-minlength="2"
		     x-ng-maxlength="20"></input>
	      <span class="input-group-addon bg-white fg-red">*</span>
	    </div>
	  </div>
	  <div ng-show="firmForm.address.$error.minlength
			|| firmForm.address.$error.maxlength">
	    <span style="color:red">名称太短，请输入2-20个字符</span>
	  </div> 
	</div>
	
      </div> 
    </form>
  </div>

  <!--BEGIN modal-footer-->
  <div class="modal-footer">
    <button class="btn btn-primary"
	    x-ng-disabled="firmForm.$invalid"
	    x-ng-click="ok()">确认</button>
    <button class="btn btn-warning" x-ng-click="cancel()">取消</button>
  </div>
  
  <!--END modal-footer-->
</script>


<script type="text/ng-template" id="select-color.html">
  <div class="modal-body">
    <div class="table-responsive">
      <table class="table table-bordered table-striped table-condensed table-advanced">
	<tbody>
	  <tr x-ng-repeat="c in params.colors">
	    <td class="text-center vert-align">{{c.type}}</td>
	    <td x-ng-repeat="s in c.colors">
	      <div class="checkbox checkbox-danger checkbox-circle">
		<input id={{s.id}} type="checkbox" x-ng-model="s.select"></input>
		<label for={{s.id}}>{{s.name}}</label>
	      </div>
	    </td>
	  </tr>
	</tbody>
      </table>
    </div>
  </div> <!--END modal-body-->

  <div class="modal-footer">
    <button class="btn btn-primary" x-ng-click="ok()">确认</button>
    <button class="btn btn-warning" x-ng-click="cancel()">取消</button>
  </div>  
</script>


<script type="text/ng-template" id="select-size.html"> 
  <div class="modal-body">
    <div class="table-responsive">
      <table class="table table-bordered table-striped table-condensed table-advanced">
	<tbody>
	  <tr class="text-center" x-ng-repeat="g in params.groups">
	    <td class="vert-align">
	      <div class="checkbox checkbox-danger checkbox-circle">
		<input id={{g.id}} type="checkbox"
		       x-ng-model="g.select"
		       x-ng-click="params.select_group(params.groups, g)"></input>
		<!-- <input id={{g.id}} type="checkbox" -->
		<!--        x-ng-model="g.select"></input> -->
		<label for={{g.id}}>{{g.name}}</label>
	      </div>
	    </td>
	    <td class="vert-align">{{g.si}}</td>
	    <td class="vert-align">{{g.sii}}</td>
	    <td class="vert-align">{{g.siii}}</td>
	    <td class="vert-align">{{g.siv}}</td>
	    <td class="vert-align">{{g.sv}}</td>
	    <td class="vert-align">{{g.svi}}</td>
	  </tr>
	</tbody>
      </table>
    </div>
  </div>

  <div class="modal-footer">
    <button class="btn btn-primary" x-ng-click="ok()">确认</button>
    <button class="btn btn-warning" x-ng-click="cancel()">取消</button>
  </div>  
</script>
